<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RepletO - Editor de Python Online</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üöÄ</text></svg>">
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="css/editor.css">
</head>
<body>
    <div class="app-container">
        <!-- Header -->
        <header class="header">
            <div class="header-content">
                <div class="logo">
                    <span class="logo-icon">üöÄ</span>
                    <h1>RepletO</h1>
                    <span class="subtitle">Editor de Python Online</span>
                </div>
                <div class="header-actions">
                    <button id="clearBtn" class="btn btn-secondary">
                        <span class="icon">üóëÔ∏è</span>
                        Limpiar
                    </button>
                    <button id="runBtn" class="btn btn-primary">
                        <span class="icon">‚ñ∂Ô∏è</span>
                        Ejecutar
                        <span class="shortcut">Ctrl+Enter</span>
                    </button>
                </div>
            </div>
        </header>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Editor Panel -->
            <div class="panel editor-panel">
                <div class="panel-header">
                    <h3>Editor de C√≥digo</h3>
                    <div class="panel-actions">
                        <span class="language-badge">Python</span>
                    </div>
                </div>
                <div class="panel-content">
                    <div id="editor" class="monaco-editor"></div>
                </div>
            </div>

            <!-- Resizer -->
            <div class="resizer" id="resizer"></div>

            <!-- Output Panel -->
            <div class="panel output-panel">
                <div class="panel-header">
                    <h3>Salida</h3>
                    <div class="panel-actions">
                        <button id="clearOutputBtn" class="btn-icon" title="Limpiar salida">
                            <span>üóëÔ∏è</span>
                        </button>
                    </div>
                </div>
                <div class="panel-content">
                    <div id="output" class="output-container">
                        <div class="output-placeholder">
                            <div class="placeholder-icon">üìù</div>
                            <p>La salida de tu c√≥digo aparecer√° aqu√≠...</p>
                            <p class="placeholder-hint">Tip: Usa Ctrl+Enter para ejecutar</p>
                        </div>
                    </div>
                </div>
            </div>
        </main>

        <!-- Footer -->
        <footer class="footer">
            <div class="footer-content">
                <span>RepletO - Editor Python Online</span>
                <div class="footer-links">
                    <a href="https://github.com/Sickboooooy/RepletO" target="_blank">GitHub</a>
                    <span>‚Ä¢</span>
                    <a href="http://127.0.0.1:8000/health" target="_blank">API Status</a>
                </div>
            </div>
        </footer>

        <!-- Loading Overlay -->
        <div id="loadingOverlay" class="loading-overlay hidden">
            <div class="loading-spinner">
                <div class="spinner"></div>
                <p>Ejecutando c√≥digo...</p>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <!-- Monaco Editor CDN con fallback -->
    <script>
        // Configurar Monaco con m√∫ltiples fallbacks
        window.require = window.require || {};
        window.require.config = window.require.config || function() {};
        
        // Funci√≥n para cargar script con fallback
        function loadScriptWithFallback(urls, callback, errorCallback) {
            let currentIndex = 0;
            
            function tryLoad() {
                if (currentIndex >= urls.length) {
                    if (errorCallback) errorCallback();
                    return;
                }
                
                const script = document.createElement('script');
                script.src = urls[currentIndex];
                script.onload = callback;
                script.onerror = () => {
                    console.warn(`Failed to load: ${urls[currentIndex]}`);
                    currentIndex++;
                    tryLoad();
                };
                document.head.appendChild(script);
            }
            
            tryLoad();
        }
        
        // Cargar Monaco Editor con fallbacks
        const monacoUrls = [
            'https://unpkg.com/monaco-editor@0.44.0/min/vs/loader.js',
            'https://cdn.jsdelivr.net/npm/monaco-editor@0.44.0/min/vs/loader.js',
            'https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.44.0/min/vs/loader.js'
        ];
        
        loadScriptWithFallback(
            monacoUrls,
            () => {
                console.log('‚úÖ Monaco loader cargado');
                window.monacoLoaded = true;
            },
            () => {
                console.warn('‚ùå No se pudo cargar Monaco, usando fallback');
                window.monacoLoaded = false;
            }
        );
    </script>
    
    <script src="js/api.js"></script>
    <script src="js/editor.js"></script>
    <script src="js/main.js"></script>
</body>
</html>